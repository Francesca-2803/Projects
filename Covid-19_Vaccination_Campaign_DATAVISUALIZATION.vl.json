https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAKyUAVhDYA7EABoQAEzjQATjRyZ289ABkasuAAIcgtpggn6STGfVtiNVSaMAzNuuQ65J9XzqykZkJgDCTi78AIwAnCYAakhQUEZ2uuFICDhINGSybgUAkphIggCelCYAmmwMJlBIBRBwgnBQ9uV16iZIAUgmbO6FmHABEPZGNvAmbWRwssq99vSmmGw4g8OrJs4QDGU0AF7pcpSKIADuLvRoABwADA9KOphtaKCjAB6YaCARzmUMXiSRSaV8BTCWRyeXkSk8skwAGVjnA0AAWZ4gKBsCzqP4AYgATABBIkAdnJYQuCN+6AAsn0ANZjEwAMVavyUTCQLWExj+TEs6wQNLkmAA6nA8lhBbjVPilE1YF4-ggXMp3kplOV7g8AL7auwoVCgBjqQR-LC4fBEdRIS7UOiMJgMFrqHGIhaYSg4hAENn22RQNSNfhEx4AZgIAJcBGQRhjkWUAH1lMbfRBiCBDSBMEGIJ5vGgANqga6LNiXUugDZ-fai+E0VrKevtOTptNsFoXXl-KAMBAMQTpUgpnEMRE5gC6htA7hoglG+PQ6cwg8osjYCDgKb6cCQAEIALzHgDkADkSWecwp54vl381xutzu9-0T+eb3PsWUByPRifOwN33AZTxMM99AAeXpM8TAAfggi8vGUKDSAmODUBMZ8EEoUCTHAyCigAcTgxDLxQtC1EwTDsOA3D8MIgAFIoAFEyKQyj0JokwsJwvD+gI48IISAARa8EM4oIqIw3i6PXBjBMI1j6QAJQ4iiglY2S+PogSDyEiC2QSUjJM05RtJ43SFP0sDhLPJiSQAFQ05CtJ0+SQKU+zHIAIVclDLNo-jGPshJWIvAL3KszzFIMwj9BJAAtDSwm9Rxgr00KIPpEl1LMtLEQyuSQu8iCnKgpFUvSthMps7KzwAVXpfyCpquqvPi+ySV8-LyKRBhlFo2LbMMs9fJJKqzIGoaSqysqzzCEl9A0maOriuyIKW2DpsG9bRsI+koJW3bZqwkaGqYxrTP6va5IuhakTyjSihkNphtKrqIKRIowhet64Ews8byVCA-hJfowZ-BclzGD48xoHdGtkOg-nKA9FRABcWyA0oUxkBB1RRiZ7SOXQ0SUMg6SJB4af1fVpyUCAclSWQyDQSMsWIT1GjpMsrhuGA9SxeAZTpTmsVed5TTzOAfj+Ji4A2NpChGBYIBoUgGn3XZrCcywyjMJXzFMYhklZuw4CWa56GmUwWk9JZlG7CmVFDTRtF0P4nJgGhrD93pZiMUxYD6FYYDsfw4BwcZvWsHZ8wWJYhjto3ldMKYjFGWQNa1xoAgaLxxhwDsQhsNhU6MKBIYzgodiQZQib9-NTgKFOdgdjtsJdqooODUwunqCOtb5dpRiWJpen6BQTCHJctBV-k1Cn+2YCrOuI-sHF1GLrv1lT4J3HcMZvSj2g5GsdvN5XqgTBJHAY7YZJfbZ1OS6z1kr9MBA6haVOl+mDQKATJjAQGsNcQQghCjVwPH-fe7hkiLjoJbVOyQdBmwhFsVO6xcQ6E2DbGAqcEwFA8F4HwuhzjwnFCiI4aJUARiUDiPEhJ0R3DENEMIRIxRTgZMyVkHIlzcMlNKMgsp0BCkEAqC4+wmBSzoXmGAjgGCiJsIjUwRYz66DBkzZgciIjMPQASVh7DOHSN0XQNobJxR-EZOoFkPQBFchADIuRVjEQ0LoUSIkOjZEWLgG44RYs5SSN7MGNeK4QDqmUJqV2Oo0BEjEEoIY7gWh0jEFiFxfimIN2CGzNA0QDRKAWDiXJ7MZZfHhtjEJ6ABxz1HLuCcU4Xh+L+EidsiwTCiRdiYAAFLU4c9SACUFxMDlBwPIgAjgcREyD0FolzLqGWci-hFC9DnTWId9w0mbNU2W9ocA0CQCmD+6yzYjLGZM6Zrx6m3mxLiVUMsqmtnQBDWBIyWnoDaW0DovQCivJQEzRo0tQBBnmKWEABIABsHDfLkjEBcAkYhIy+TCGEWICL0RhHJGyMI6IEWxF8mIHFokEVhDZJClF6LZy5g1rQ+Gjs6Bexljke0op0Br1IJjM2ggGB0PJLmblvL4n0yUCOdGK5+YsqyGDVA-NZBZHkUkS0ShBV0P5v8mVIBXq4nmYzZxrQx7w1GeMv478mlYx2coGVJYQAapALObkRhnkgDmEnW8oB5U7itE4OGKqyhCtlR67cu5QJ-BnEzA1HQjUXNNWwLO2yWzWpAK+EN-R7VJL0JE3+StOUXGMPuCYaB8y8vpnq5Adjo0mpqTQD07wRWgHLUySt8il63OKWwUpRq2C4K0DWC1ON0ApvfAec5Vbk3bjSMqhGbx5GqXIF7aGlrcZHIJk3EmSAyZyFdsa+RoxsheDKO8mdfxRKW3df23Zy4kAHKOSc3OAK8wxvQFMpo1y5lHullqtZudNkBHDXcgx94B3jrfKGxhpcIR9tGIW1c80vpnh6upC4qrCSQs4eSaF57oN0hUHBza41JogxAChwxdwwiRmiOSViWHqK406vhsS15kP+vkQSMIYgwjRFYr5GjMHcP1QWixdizGeWsdiOJokokeM-mw3RjaY0VJIb9aJwk0RoWxEjGyXjOHPr4aekp4jLHCSRhJLEJaeKZO0dgwJ+D20iMkYhbi9E3GuGWb47psazV-IiYDRCkkDxWIPF8pGbTcmDr2USilHz8iTAEkjJGO4rFnOhes-Rsa0FYLRdQ6JSFmL0VuZ03hsaxlSJZcMUSSMEZIXwoK2FhqP0-plYhXcckoloiiXJCl-jaXmLOXs0ZwxkLuM4q07V1L8nCIVSqk1gk5J2sPDuCSsb3WJs+R6v1lT5W2SRkhWRrrHnCLhUijNsQdxIUPCWvtorzFrobd8wSKTi2wjUeWwd+yR0VozbJZC0SYQHhXZs-hpan3lP3ZJKJZFBKAc9YiyRO7rHWGRlYiSUbd5Zbueu+956M30TItYrt6HuENVjTWl98llLCeUGJ4RNyqFuLw8JASolYQlto9k+NqnkMxq06CjjrFOKLNs6sytznsCxraveid5FqL8tC4xzZan9lCr5lqjN6FYRYU1b1a6xY8NVVJuV44C4EvXY88LUoWnMknEzXTSAZJqS0AxCeEoHI0SQhoHJAaemDMXgFiLGy-mMNHzMr6FkP4SqcwMx-NcZQtxUCPBFiIsREttTuy0JB9APt7btKWGQfZhCA4DDnjoEw7pmzWAAaHdQ4dI6Lh5eu6D2CAgdK-uXUoUCzZgmMN3Fo1gG5rpbuPEwB5YAmEuHAOATJsKaxcFbEwTByhmA2AMzB7hHAIE6e0RATBWQJPoDPGmNNy4mDadobfrI1P75MIf6IVQs+FzxHPyvRc1Al0WPHCuHdI1D9AlUekkRX4dgzVlwsEdgf43Q1gqw+grVU489r0YAZ4BhOUdAgUg5u9r1xk+h45r4nUgFLZsDTA1w4BKFp1gVZZ5Z0BQRWZCCXY+9G4jBm57Qh8F9NE5AhEPEOYsRlRwk1QNQtQAMHkIVjEOEuEqEeEQBbF7F2ROQLgeQ+Rg45RsBtwhEpQglxF5RfVnFzFj1B0yFDhaElgNEgDl8AIMg19txN8QwEAd8ehD8Hhj9T890bDr9aZoh59F9x9J8zFfEZ19FBCjE2ERDvDXFrFeE7F+EZCfEQj3FUR4lvEtCfDLFxRVDREcMJFWxcwW4c5-c+0gV-wz0Od1h29RB+IS4cAUwAhz4BRQY-giiyhXM2c1FkZUZ0BPCm0mxgM1wV1twB9SZyZexNU2j-121O1ylKkl1WiJ92jH0x090S57Qp1lkXl6DiZB8MhT1AIlQvg-YjUgEmQIhJw6Q7hRUkAd9BASRhB8g-g2h3AnERwzjWIvgY4-gSwdAdwrFvA7Ael+JVUZ4zwABSJgM8QZacC4PPFwU9CAIWGWEjEsbxIkalBZeGJAMgPPPgQCdABsBNS9A2QQUQmYy5V9WZDZD9RVc2YOHvZefvBgiYE+J2GfVQJYFgsolfBdcDQDO5RYRlNgkPVlcPQ9Do3ZO1F4J9EDSdUk1pb-X5O+NNQFMoOhUAZ2YhcFQ3NgY3AGC4M3JxS3biC4G3PVUFNVCFdXTXBFJFFFNFDFfnXFfFQlYlUlcnS06lUHeRNE3UXMDYRBUZelCDJlUAKVNlEACPF0-JAVAbB4SgIkEVF1JAcVPtRtZta4hQpmWI1ASMetEAAM61D1BVP4J1OWaRb-RM9AYAi4EYkIJNCpPVHkrNCAn+UgPNDGKzYtOAUtJQBMpZUU0s3McsvJGWRZIDHE9vfEndP4F9GZUod9D0lmOgAcwzTbL3GTP3MhPtIPOGGWJoZ5G1fMr4SgIYtHAMvMxYAsqPH3SJZkYskAdQYcV2EmNgFkQUEcYBC4coLhVACMsQDMrIwsFcwNC1WGFcUATc8FHcvcqYxQf00PQMncmcNs88itTs2YuWJxJhQQpgJ86Y2kE9FwSwdg1MgpJsSBR85IJtHs4MDtd3fsvXAbaIKMl4ZC8Yzo40fGHomkluTdaogk2oxAeYgUhGJGFGHDfcrGPQzAJyUUt412f3OwP4QEkwf4jI0tH8Dsz4CShipUS4zNG4pxZQCpVAfgdJMQ5EfCyMIy7C52X4MikpSiz4BimEgbG1JEboEMeSJALCa0PAQgAgWgegZgX0bcAgZBYQJAAgHEQEOIfgDYJOY0fgTvVmGgC4YiJRTYIkLCXyVoCwFGGeYiX2XJGgGeVSOQVIGeNpHeXILce1b3PVT0BcMpIC7YmVUAe41oAJcy3Ck4s4vwiJOA3UDqlq6hfCyWPxVq9AUSHCpxaI4yulVAaIRJUguAbJN3PsgimMs4kkNmaWCrXMHXZ5Jq04-q8Qsaiyi4ZqwQAJDgma9EZpGdEakAI69q+a861Mmma6pIxEFIsREAdI0k9alUCJKJGJC4LwZscQrcTi4IAIDoJlDAYGo4cUPina6oR3IkTEUVcgJOAADXyXSVzB5GATzzqF11aN9mgx-gfPoooKAs0r+E0FSIuF0sd3JG1EWQMu9yAA


{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Line plots that provide information regarding Covid-19 Vaccination Campaign in Italy. You can select your area of interest in the legend at the top of the visualization.",
  "width": 800,
  "title": {
    "text": "Covid-19 Vaccination Campaign",
    "fontSize": 40,
    "color": "#2A277C",
    "font": "Marker Felt",
    "baseline": "bottom",
    "fontWeight": "bolder",
    "anchor": "middle",
    "dy": 80
  },
  "data": {
    "url": "https://raw.githubusercontent.com/Francesca-2803/Covid/main/Covid_data.csv"
  },
  "transform": [
    {
      "window": [
        {"op": "sum", "field": "seconda_dose", "as": "cumulative_count"}
      ]
    },
    {"filter": "datum.nome_area!=='NA'"},
    {"filter": "datum.nome_area!==''"},
    {
      "calculate": "datum.area == 'LOM' ? 'NordOvest' : datum.area == 'LIG' ? 'NordOvest' : datum.area == 'PIE' ? 'NordOvest' : datum.area == 'VDA' ? 'NordOvest' : datum.area == 'EMR' ? 'NordEst' : datum.area == 'FVG' ? 'NordEst' : datum.area == 'PAT' ? 'NordEst' : datum.area == 'PAB' ? 'NordEst' : datum.area == 'VEN' ? 'NordEst' : datum.area == 'LAZ' ? 'Centro' : datum.area == 'MAR' ? 'Centro' : datum.area == 'TOS' ? 'Centro' : datum.area == 'UMB' ? 'Centro' : datum.area == 'ABR' ? 'Sud' :  datum.area == 'BAS' ? 'Sud' : datum.area == 'CAL' ? 'Sud' : datum.area == 'CAM' ? 'Sud' : datum.area == 'MOL' ? 'Sud' :  datum.area == 'PUG' ? 'Sud' :  datum.area == 'SAR' ? 'Isole' :  datum.area == 'SIC' ? 'Isole' :''",
      "as": "Areas"
    },
    {
      "filter": {
        "timeUnit": "year",
        "field": "data_somministrazione",
        "gt": 2020
      }
    }
  ],
  "spacing": 30,
  "vconcat": [
    {
      "width": 800,
      "height": 300,
      "title": {
        "text": "People in intensive care vs Total people vaccinated with the second dose",
        "description": "This is a line chart that represents the trend of the people in intensive care corresponding to the increase in the administration of the second dose. Once you have selected an area, multiple lines are shown that correspond to the different regions of that area. Approaching the pointer of the mouse the line thickness will increase to facilitate the activation of the tooltip with the main information.",
        "fontSize": 28,
        "color": "#4851C2",
        "font": "Marker Felt",
        "fontWeight": "bolder",
        "subtitle": "through time for regions",
        "subtitleColor": "#4851C2",
        "subtitleFont": "Marker Felt",
        "subtitleFontSize": 22,
        "subtitleFontWeight": "bold",
        "anchor": "middle",
        "dy": 25,
        "offset": 50,
        "subtitlePadding": 10
      },
      "encoding": {
        "x": {
          "field": "cumulative_count",
          "title": "Second Dose (cumulative)",
          "type": "quantitative"
        },
        "y": {
          "title": "Intensive care",
          "field": "terapia_intensiva",
          "type": "quantitative"
        },
        "color": {
          "field": "Areas",
          "title": "Select an Area",
          "scale": {
            "range": ["#61CB75", "#53BCC9", "#4C7FC4", "#9B5FCD", "#CF6BC9"]
          }
        },
        "size": {"condition": {"param": "hover", "value": 7}, "value": 2}
      },
      "layer": [
        {
          "params": [
            {
              "name": "Val",
              "value": [{"Areas": "Isole"}],
              "select": {"type": "point", "fields": ["Areas"]},
              "bind": "legend"
            },
            {
              "name": "hover",
              "value": [{"nome_area": ""}],
              "select": {
                "type": "point",
                "fields": ["nome_area"],
                "on": "mouseover",
                "nearest": true
              }
            }
          ],
          "mark": {"type": "circle"}
        },
        {
          "mark": {"type": "line"},
          "encoding": {
            "tooltip": [
              {"field": "nome_area", "type": "nominal", "title": "Region"},
              {
                "field": "data_somministrazione",
                "type": "temporal",
                "title": "Date"
              },
              {
                "field": "terapia_intensiva",
                "type": "quantitative",
                "title": "Intensive care"
              }
            ],
            "color": {
              "field": "nome_area",
              "condition": [
                {"test": "datum.area == 'ABR'", "value": "#6C2761"},
                {"test": "datum.area == 'BAS'", "value": "#8C317E"},
                {"test": "datum.area == 'VDA'", "value": "#C5C1EB"},
                {"test": "datum.area == 'PIE'", "value": "#9992DB"},
                {"test": "datum.area == 'EMR'", "value": "#16193F"},
                {"test": "datum.area == 'SAR'", "value": "#3A9CA4"},
                {"test": "datum.area == 'CAM'", "value": "#C44EB2"},
                {"test": "datum.area == 'UMB'", "value": "#A0E0B3"},
                {"test": "datum.area == 'LAZ'", "value": " #338E4E"},
                {"test": "datum.area == 'LOM'", "value": "#6D64C9"},
                {"test": "datum.area == 'FVG'", "value": "#232865"},
                {"test": "datum.area == 'SIC'", "value": "#87D1D7"},
                {"test": "datum.area == 'PAT'", "value": "#6EBFCF"},
                {"test": "datum.area == 'TOS'", "value": "#71D08D"},
                {"test": "datum.area == 'PAB'", "value": "#2F368C"},
                {"test": "datum.area == 'VEN'", "value": "#5860CA"},
                {"test": "datum.area == 'PUG'", "value": "#DB8DCE"},
                {"test": "datum.area == 'MOL'", "value": "#CF6DC0"},
                {"test": "datum.area == 'CAL'", "value": "#AD3B9B"},
                {"test": "datum.area == 'LIG'", "value": "#483EAF"},
                {"test": "datum.area == 'MAR'", "value": "#43BE68"},
                {"test": "datum.Areas == 'Sud'", "value": "#CF6BC9"},
                {"test": "datum.Areas == 'NordOvest'", "value": "#9B5FCD"},
                {"test": "datum.Areas == 'NordEst'", "value": "#4C7FC4"},
                {"test": "datum.Areas == 'Isole'", "value": "#53BCC9"},
                {"test": "datum.Areas == 'Centro'", "value": "#61CB75"}
              ],
              "legend": {
                "values": ["Centro", "Isole", "NordEst", "NordOvest", "Sud"],
                "offset": -100,
                "padding": 70
              }
            }
          }
        }
      ],
      "transform": [{"filter": {"param": "Val"}}]
    },
    {
      "width": 800,
      "height": 300,
      "description": "The second graph is a multi series line chart that illustrates the trend of the total vaccine doses administrated each week divided by population from December 25th, 2020 to September 16th, 2021. The colored line corresponds to the selected area. Moving the pointer of the mouse towards the graph, a vertical line appears that indicates the date.",
      "title": {
        "text": "Vaccine doses administrated by region",
        "fontSize": 30,
        "anchor": "middle",
        "color": "#4851C2",
        "font": "Marker Felt",
        "baseline": "bottom",
        "fontWeight": "bolder",
        "subtitle": "normalized for the population from December 2020 to September 2021 by week",
        "subtitleColor": "#4851C2",
        "subtitleFont": "Marker Felt",
        "subtitleFontSize": 22,
        "subtitleFontWeight": "bold"
      },
      "transform": [
        {"calculate": "datum.totale/datum.pop_regione", "as": "total2"},
        {"timeUnit": "week", "field": "data_somministrazione", "as": "week"}
      ],
      "encoding": {
        "x": {
          "field": "week",
          "type": "temporal",
          "title": "Administration Date",
          "axis": {
            "tickCount": 8,
            "labelAlign": "left",
            "labelExpr": "[timeFormat(datum.value, '%b')]",
            "gridDash": {"value": [2, 2]}
          }
        },
        "y": {
          "aggregate": "sum",
          "field": "total2",
          "type": "quantitative",
          "title": "Vaccine doses administered divided by population"
        },
        "color": {
          "condition": {
            "param": "Val",
            "field": "Areas",
            "type": "nominal",
            "title": "Select an Area",
            "scale": {
              "domain": ["Centro", "Isole", "NordEst", "NordOvest", "Sud"],
              "range": ["#61CB75", "#53BCC9", "#4C7FC4", "#9B5FCD", "#CF6BC9"]
            }
          },
          "value": "grey"
        },
        "opacity": {"condition": {"param": "Val", "value": 1}, "value": 0.2}
      },
      "layer": [
        {"mark": {"type": "line", "size": 3}},
        {
          "params": [
            {
              "name": "index",
              "select": {
                "type": "point",
                "encodings": ["x"],
                "on": "mousemove",
                "nearest": true
              }
            }
          ],
          "mark": {"type": "point"},
          "encoding": {
            "y": {"field": "total2", "type": "quantitative"},
            "opacity": {"value": 0}
          }
        },
        {
          "transform": [
            {"filter": {"and": ["index.week", {"param": "index"}]}}
          ],
          "mark": {"type": "rule", "stroke": "black", "y2": 0.5}
        },
        {
          "transform": [
            {"filter": {"and": ["index.week", {"param": "index"}]}}
          ],
          "mark": {
            "type": "text",
            "color": "black",
            "font": "Didot",
            "fontSize": 10,
            "fill": "black"
          },
          "encoding": {
            "y": {"value": 12},
            "text": {
              "field": "data_somministrazione",
              "type": "temporal",
              "timeUnit": "week",
              "formatType": "time",
              "format": "%b %d"
            }
          }
        }
      ]
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "dx": -50,
        "fontSize": 13,
        "font": "Didot"
      },
      "encoding": {
        "text": {
          "value": [
            "Source data: https://github.com/italia/covid19-opendata-vaccini",
            "Group 2: Belloni, Ghidini, Ronci, Serraino"
          ]
        }
      }
    }
  ],
  "config": {
    "axis": {
      "labelFont": "Didot",
      "labelColor": "gray",
      "labelFontSize": 10,
      "titleFont": "Didot",
      "titleFontSize": 15,
      "titlePadding": 10,
      "labelAngle": 23
    },
    "legend": {
      "labelFont": "Didot",
      "labelFontSize": 14,
      "titleFont": "Didot",
      "titleFontSize": 20,
      "titleFontWeight": "bold",
      "titleAnchor": "middle",
      "orient": "none",
      "direction": "horizontal",
      "legendY": -240,
      "legendX": 150
    },
    "background": "whitesmoke",
    "text": {"align": "right", "dx": -7, "dy": -5}
  }
}
